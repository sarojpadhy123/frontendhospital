import{r as s,l as P,b as i,a,j as t}from"./index.d87dee6f.js";import{A as N}from"./AccountantSidebar.24d646de.js";import"./react-confirm-alert.30c1f10e.js";import{S}from"./SearchInput.d51e8da3.js";import{O,a as v}from"./OptionsTh.e3256f46.js";import{T as I,a as R,b as l,c as j,d as n}from"./Thead.63124400.js";import{I as k}from"./IndexNo.141a2ac1.js";import{V as A}from"./ViewButton.b65128a7.js";import{R as B}from"./index.esm.bd88e434.js";import{R as $}from"./ReactPagination.781004e5.js";import"./index.esm.4a753652.js";import"./Forbidden.02296651.js";function D(){const[h,c]=s.exports.useState([]),[u,g]=s.exports.useState(1),{user:d}=s.exports.useContext(P);s.exports.useEffect(()=>{i.get("/prescription").then(e=>{c(e.data)})},[]);const y=e=>{i.get(`/prescription?q=${e}`).then(m=>{c(m.data),g(1)})},o=10,x=u*o,T=x-o,w=h.slice(T,x),C=Math.ceil(h.length/o);return a("div",{className:"p-8 bg-gray-100",children:[a("div",{className:"flex justify-between items-center",children:[t(S,{onSearch:y}),t($,{pageCount:C,handlePageClick:e=>{g(e.selected+1)}})]}),a(I,{children:[a(R,{children:[t(k,{children:"#"}),t(l,{children:"Reg. Id"}),t(l,{children:"Patient"}),t(l,{children:"Date"}),t(l,{children:"Doctor"}),t(l,{children:"Amount(\u20B9)"}),t(l,{children:"Payment Status"}),(d==null?void 0:d.role)!=="admin"&&t(O,{children:"Options"})]}),w.map((e,m)=>{var f,r,b;return a(j,{children:[t(n,{children:m+1*(u*o-9)}),t(n,{className:"font-bold",children:(f=e==null?void 0:e.patients[0])==null?void 0:f.registrationId}),t(n,{children:(r=e==null?void 0:e.patients[0])==null?void 0:r.name}),t(n,{children:e==null?void 0:e.paymentdate}),t(n,{children:(b=e==null?void 0:e.doctor[0])==null?void 0:b.name}),t(n,{children:a("span",{className:"font-bold",children:["\u20B9",e==null?void 0:e.drugamount]})}),t(n,{children:e.paymentstatus==="Paid"?t("p",{className:"font-bold text-base bg-green-700 text-center px-2 rounded w-24 text-white",children:e==null?void 0:e.paymentstatus}):t("p",{className:"font-bold text-base bg-red-700 text-center px-2 rounded w-24 text-white",children:"Unpaid"})}),(d==null?void 0:d.role)!=="admin"&&t(v,{children:a(A,{style:"bg-green-800 hover:bg-green-600",viewFunction:`/accountant/invoice?edit=${e==null?void 0:e._id}`,children:[t(B,{}),"Take Payment"]})})]},m)})]})]})}function Q(){return s.exports.useContext(P),t(N,{children:t(D,{})})}export{Q as default};
