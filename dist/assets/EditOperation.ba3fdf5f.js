import{r as i,l as O,u as F,i as f,b as u,j as n,a as r,f as l}from"./index.d87dee6f.js";import{B}from"./ButtonPreloader.e6928a61.js";import"./react-confirm-alert.30c1f10e.js";import{B as L}from"./Button.3275d51a.js";import{I as h}from"./Input.34d9876e.js";import{S as m}from"./Select.a91200f8.js";import{F as $}from"./FormLayout.630feb8e.js";function _({url:g}){const{user:o}=i.exports.useContext(O),x=F(),[S,y]=i.exports.useState([]),[v,C]=i.exports.useState([]),[b,P]=i.exports.useState(!1),[e,d]=i.exports.useState({staffname:`${o==null?void 0:o.name}`,type:"operation",patientid:"",description:"",date:"",outcomestatus:""});function a(t){d(s=>({...s,[t.target.name]:t.target.value}))}let E=f().search;const c=new URLSearchParams(E).get("edit");return i.exports.useEffect(()=>{u.get("/patient").then(t=>{y(t.data)}),u.get(`/report/?edit=${c}`).then(t=>{var s,p;d(t.data),C((p=(s=t.data)==null?void 0:s.patients[0])==null?void 0:p.name)})},[]),n($,{formName:"Edit OPERATION",children:r("form",{onSubmit:t=>{t.preventDefault(),P(!0),u.put(`/report/${c}`,{type:e==null?void 0:e.type,staffname:e==null?void 0:e.staffname,patientid:e==null?void 0:e.patientid,description:e==null?void 0:e.description,date:e==null?void 0:e.date,outcomestatus:e==null?void 0:e.outcomestatus}).then(s=>{x(`${g}`,{replace:!0}),l.success(s.data)}).catch(s=>l.error(s.response.data))},children:[n("input",{type:"hidden",name:"type",onChange:a}),n("input",{type:"hidden",name:"staffname",onChange:a}),r(m,{label:"Patient",name:"patientid",type:"number",onChange:a,children:[n("option",{value:e==null?void 0:e.patientid,children:v}),S.map((t,s)=>n("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.name},s))]}),n(h,{label:"Operation Type",type:"text",name:"description",value:e==null?void 0:e.description,onChange:a}),n(h,{label:"Date",type:"date",name:"date",onChange:a,value:e==null?void 0:e.date}),r(m,{label:"Outcome Status",name:"outcomestatus",type:"text",onChange:a,children:[n("option",{value:e==null?void 0:e.outcomestatus,children:e==null?void 0:e.outcomestatus}),n("option",{value:"Successful",children:"Successful"}),n("option",{value:"Failed",children:"Failed"})]}),n(L,{children:b?n(B,{}):"Edit Operation"})]})})}export{_ as E};
