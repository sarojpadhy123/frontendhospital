import{r as s,l as $,b as m,j as t,a,F as M,f as I}from"./index.d87dee6f.js";import{D as V}from"./DeleteButton.055862da.js";import{E as k}from"./EditButton.a6d27025.js";import{B as q}from"./Button.3275d51a.js";import{I as v}from"./Input.34d9876e.js";import{S as D}from"./SearchInput.d51e8da3.js";import{S as H}from"./Select.a91200f8.js";import{j as z}from"./react-confirm-alert.30c1f10e.js";import{O as G,a as J}from"./OptionsTh.e3256f46.js";import{T as K,a as Q,b as h,c as U,d as l}from"./Thead.63124400.js";import{F as W}from"./FormLayout.630feb8e.js";import{T as X}from"./Tabs.f2b07210.js";import{T as g}from"./Textarea.d58b1ab8.js";import{I as Y}from"./IndexNo.141a2ac1.js";import{V as Z}from"./ViewButton.b65128a7.js";import{T as p}from"./TotalNo.2b8dc21c.js";import{D as ee}from"./DoctorSidebar.182adcd2.js";import{R as F}from"./index.esm.bd88e434.js";import{R as te}from"./ReactPagination.781004e5.js";import{B as oe}from"./ButtonPreloader.e6928a61.js";import"./index.esm.e91ca65e.js";import"./index.esm.4a753652.js";import"./index.esm.812bafa8.js";import"./index.esm.9f9cf711.js";import"./Forbidden.02296651.js";function Be(){const{user:i}=s.exports.useContext($),[r,f]=s.exports.useState([]),[w,_]=s.exports.useState([]),[x,P]=s.exports.useState(1),[B,u]=s.exports.useState(!1),[o,N]=s.exports.useState({doctorid:`${i==null?void 0:i._id}`,patientid:"",casehistory:"",description:"",medication:"",date:"",drugamount:""});function d(e){N(n=>({...n,[e.target.name]:e.target.value}))}function b(){m.get("/prescription").then(e=>{f(e.data)}).catch(e=>{I.error(e.data)})}const O=e=>{e.preventDefault(),u(!0),m.post("/prescription",{doctorid:o==null?void 0:o.doctorid,patientid:o==null?void 0:o.patientid,casehistory:o==null?void 0:o.casehistory,description:o==null?void 0:o.description,medication:o==null?void 0:o.medication,date:o==null?void 0:o.date,drugamount:o==null?void 0:o.drugamount}).then(n=>{window.location.reload(!0),u(!1)}).catch(n=>{I.error(n.response.data),u(!1)})};s.exports.useEffect(()=>{m.get("/patient").then(e=>{_(e.data)}),b()},[]);const R=e=>{m.get(`/prescription?q=${e}`).then(n=>{f(n.data),P(1)})},c=10,y=x*c,E=y-c,j=r.slice(E,y),A=Math.ceil(r.length/c),L=e=>{P(e.selected+1)};return t(ee,{children:t(X,{label1:"Prescriptions",label2:"Add Prescription",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[t(D,{onSearch:R}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[t(p,{totalnumber:r==null?void 0:r.length}),t(te,{pageCount:A,handlePageClick:L})]})]}),a(K,{children:[a(Q,{children:[t(Y,{children:"#"}),t(h,{children:"Reg. Id"}),t(h,{children:"Patient"}),t(h,{children:"Date"}),t(h,{children:"Doctor"}),t(G,{children:"Options"})]}),j.map((e,n)=>{var C,S,T;return a(U,{children:[t(l,{children:n+1*(x*c-9)}),t(l,{className:"font-bold",children:(C=e==null?void 0:e.patients[0])==null?void 0:C.registrationId}),t(l,{children:(S=e==null?void 0:e.patients[0])==null?void 0:S.name}),t(l,{children:e==null?void 0:e.date}),t(l,{children:(T=e==null?void 0:e.doctor[0])==null?void 0:T.name}),a(J,{children:[a(Z,{viewFunction:`/doctor/view_medications?edit=${e==null?void 0:e._id}`,children:[t(F,{}),"View"]}),(i==null?void 0:i._id)===(e==null?void 0:e.doctorid)&&a(M,{children:[a(k,{editFunction:`/doctor/edit_prescription?edit=${e==null?void 0:e._id}`,children:["Edit",t(F,{})]}),a(V,{path:"prescription",id:e==null?void 0:e._id,record:b,children:["Delete",t(z,{})]})]})]})]},n)})]})]}),content2:t(W,{formName:"ADD PRESCRIPTION",children:a("form",{onSubmit:O,children:[t("input",{type:"hidden",name:"doctorid",onChange:d}),a(H,{label:"Patient",name:"patientid",type:"number",onChange:d,children:[t("option",{children:"Select Patient"}),w.map((e,n)=>a("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},n))]}),t(g,{label:"Case History",name:"casehistory",type:"text",onChange:d}),t(g,{label:"Ailment/Description",name:"description",type:"text",onChange:d}),t(g,{label:"Medication",name:"medication",type:"text",onChange:d}),t(v,{label:"Amount",name:"drugamount",type:"text",onChange:d}),t(v,{label:"Date",type:"date",name:"date",onChange:d}),t(q,{children:B?t(oe,{}):"Add Prescription"})]})})})})}export{Be as default};
