import{r as s,l as v,u as E,i as P,b as r,j as a,a as u,f as c}from"./index.d87dee6f.js";import{B}from"./ButtonPreloader.e6928a61.js";import"./react-confirm-alert.30c1f10e.js";import{B as L}from"./Button.3275d51a.js";import{I as l}from"./Input.34d9876e.js";import{S as $}from"./Select.a91200f8.js";import{F as j}from"./FormLayout.630feb8e.js";function U({url:h}){const{user:o}=s.exports.useContext(v),m=E(),[g,x]=s.exports.useState([]),[y,C]=s.exports.useState([]),[S,b]=s.exports.useState(!1),[e,d]=s.exports.useState({staffname:`${o==null?void 0:o.name}`,type:"death",patientid:"",description:"",date:""});function i(t){d(n=>({...n,[t.target.name]:t.target.value}))}let f=P().search;const p=new URLSearchParams(f).get("edit");return s.exports.useEffect(()=>{r.get("/patient").then(t=>{x(t.data)}),r.get(`/report/?edit=${p}`).then(t=>{var n;d(t.data),C((n=t.data)==null?void 0:n.patients[0].name)})},[]),a(j,{formName:"EDIT DEATH",children:u("form",{onSubmit:t=>{t.preventDefault(),b(!0),r.put(`/report/${p}`,{type:e==null?void 0:e.type,staffname:e==null?void 0:e.staffname,patientid:e==null?void 0:e.patientid,description:e==null?void 0:e.description,date:e==null?void 0:e.date}).then(n=>{m(`${h}`,{replace:!0}),c.success(n.data)}).catch(n=>c.error(n.response.data))},children:[a("input",{type:"hidden",name:"type",onChange:i}),a("input",{type:"hidden",name:"staffname",onChange:i}),u($,{label:"Patient",name:"patientid",type:"number",onChange:i,children:[a("option",{value:e==null?void 0:e.patientid,children:y}),g.map((t,n)=>a("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.name},n))]}),a(l,{label:"Cause",name:"description",type:"text",value:e==null?void 0:e.description,onChange:i}),a(l,{label:"Date",type:"date",name:"date",value:e==null?void 0:e.date,onChange:i}),a(L,{children:S?a(B,{}):"Edit Death"})]})})}export{U as E};
