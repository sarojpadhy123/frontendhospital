import{r as s,l as E,u as I,i as B,b as a,j as i,a as l,f as h}from"./index.d87dee6f.js";import{B as L}from"./ButtonPreloader.e6928a61.js";import"./react-confirm-alert.30c1f10e.js";import{B as T}from"./Button.3275d51a.js";import{I as m}from"./Input.34d9876e.js";import{S as j}from"./Select.a91200f8.js";import{F}from"./FormLayout.630feb8e.js";import{T as d}from"./Textarea.d58b1ab8.js";import{D as N}from"./DoctorSidebar.182adcd2.js";import"./index.esm.e91ca65e.js";import"./index.esm.4a753652.js";import"./index.esm.812bafa8.js";import"./index.esm.9f9cf711.js";import"./Forbidden.02296651.js";function Q(){const{user:r}=s.exports.useContext(E),g=I(),[x,y]=s.exports.useState([]),[C,b]=s.exports.useState([]),[S,v]=s.exports.useState(!1),[e,c]=s.exports.useState({doctorid:`${r==null?void 0:r._id}`,patientid:"",casehistory:"",description:"",medication:"",date:"",drugamount:""});function o(t){c(n=>({...n,[t.target.name]:t.target.value}))}let P=B().search;const p=new URLSearchParams(P).get("edit");return s.exports.useEffect(()=>{a.get("/patient").then(t=>{y(t.data)}),a.get(`/prescription/?edit=${p}`).then(t=>{var n,u;c(t.data),b((u=(n=t.data)==null?void 0:n.patients[0])==null?void 0:u.name)})},[]),i(N,{children:i(F,{formName:"EDIT PRESCRIPTION",children:l("form",{onSubmit:t=>{t.preventDefault(),v(!0),a.put(`/prescription/${p}`,{doctorid:e==null?void 0:e.doctorid,patientid:e==null?void 0:e.patientid,casehistory:e==null?void 0:e.casehistory,description:e==null?void 0:e.description,medication:e==null?void 0:e.medication,date:e==null?void 0:e.date,drugamount:e==null?void 0:e.drugamount}).then(n=>{g("/doctor/prescriptions",{replace:!0}),h.success(n.data)}).catch(n=>{h.error(n.response.data)})},children:[i("input",{type:"hidden",name:"doctorid",onChange:o}),l(j,{label:"Patient",name:"patientid",type:"number",onChange:o,children:[i("option",{value:e==null?void 0:e.patientid,children:C}),x.map((t,n)=>i("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.name},n))]}),i(d,{label:"Case History",name:"casehistory",type:"text",value:e==null?void 0:e.casehistory,onChange:o}),i(d,{label:"Ailment/Description",name:"description",type:"text",value:e==null?void 0:e.description,onChange:o}),i(d,{label:"Medication",name:"medication",type:"text",value:e==null?void 0:e.medication,onChange:o}),i(m,{label:"Amount",type:"text",name:"drugamount",value:e==null?void 0:e.drugamount,onChange:o}),i(m,{label:"Date",type:"date",name:"date",value:e==null?void 0:e.date,onChange:o}),i(T,{children:S?i(L,{}):"Edit Prescription"})]})})})}export{Q as default};
