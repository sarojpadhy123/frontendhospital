import{r as s,l as _,b as m,j as t,a,f}from"./index.d87dee6f.js";import{D as $}from"./DeleteButton.055862da.js";import{E as A}from"./EditButton.a6d27025.js";import{B as H}from"./Button.3275d51a.js";import{I as w}from"./Input.34d9876e.js";import{S as M}from"./SearchInput.d51e8da3.js";import{S as P}from"./Select.a91200f8.js";import{j as W}from"./react-confirm-alert.30c1f10e.js";import{O as k,a as q}from"./OptionsTh.e3256f46.js";import{T as z,a as G,b as c,c as J,d as i}from"./Thead.63124400.js";import{F as K}from"./FormLayout.630feb8e.js";import{T as Q}from"./Tabs.f2b07210.js";import{I as U}from"./IndexNo.141a2ac1.js";import{T as V}from"./TotalNo.2b8dc21c.js";import{R as X}from"./index.esm.bd88e434.js";import{R as Y}from"./ReactPagination.781004e5.js";import{B as Z}from"./ButtonPreloader.e6928a61.js";function ge({role:S}){const{user:r}=s.exports.useContext(_),[C,I]=s.exports.useState([]),[d,g]=s.exports.useState([]),[y,x]=s.exports.useState(1),[N,h]=s.exports.useState(!1),[n,D]=s.exports.useState({staffname:`${r==null?void 0:r.name}`,type:"birth",patientid:"",description:"",date:""});function l(e){D(o=>({...o,[e.target.name]:e.target.value}))}function u(){m.get("/report?type=birth").then(e=>{g(e.data)}).catch(e=>{f.error(e.data)})}const F=e=>{e.preventDefault(),h(!0),m.post("/report",{type:n==null?void 0:n.type,staffname:n==null?void 0:n.staffname,patientid:n==null?void 0:n.patientid,description:n==null?void 0:n.description,date:n==null?void 0:n.date}).then(o=>{h(!1),u(),f.success(o.data)}).catch(o=>{h(!1),f.error(o.response.data)})};s.exports.useEffect(()=>{m.get("/patient").then(e=>{I(e.data)}),u()},[]);const O=e=>{m.get(`/report?type=birth&q=${e}`).then(o=>{g(o.data),x(1)})},p=10,B=y*p,R=B-p,j=d.slice(R,B),E=Math.ceil(d.length/p),L=e=>{x(e.selected+1)};return t(Q,{label1:"Births",label2:"Add Birth",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[t(M,{onSearch:O}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[t(V,{totalnumber:d==null?void 0:d.length}),t(Y,{pageCount:E,handlePageClick:L})]})]}),a(z,{children:[a(G,{children:[t(U,{children:"#"}),t(c,{children:"Reg. Id"}),t(c,{children:"Patient"}),t(c,{children:"Birth Type"}),t(c,{children:"Doctor"}),t(c,{children:"Date"}),(r==null?void 0:r.role)!=="admin"&&t(k,{children:"Options"})]}),j.map((e,o)=>{var v,T;return a(J,{children:[t(i,{children:o+1*(y*p-9)}),t(i,{className:"font-bold",children:(v=e==null?void 0:e.patients[0])==null?void 0:v.registrationId}),t(i,{children:(T=e==null?void 0:e.patients[0])==null?void 0:T.name}),t(i,{children:e==null?void 0:e.description}),t(i,{children:e==null?void 0:e.staffname}),t(i,{children:e==null?void 0:e.date}),(r==null?void 0:r.role)!=="admin"&&a(q,{children:[a(A,{editFunction:`${S}/edit_birth?edit=${e==null?void 0:e._id}`,children:["Edit",t(X,{})]}),a($,{path:"report",id:e==null?void 0:e._id,record:u,children:["Delete",t(W,{})]})]})]},o)})]})]}),content2:t(K,{formName:"ADD BIRTH",children:a("form",{onSubmit:F,children:[t("input",{type:"hidden",name:"type",onChange:l}),t("input",{type:"hidden",name:"staffname",onChange:l}),a(P,{label:"Patient",name:"patientid",type:"number",onChange:l,children:[t("option",{value:"",children:"Select Patient"}),C.map((e,o)=>a("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},o))]}),a(P,{label:"Birth Type",name:"description",type:"text",onChange:l,children:[t("option",{value:"",children:"Select Birth Type"}),t("option",{value:"Natural Delivery",children:"Natural Delivery"}),t("option",{value:"Caesarean Delivery",children:"Caesarean Delivery"}),t("option",{value:"Water Birth",children:"Water Birth"}),t("option",{value:"Hypnobirthing",children:"Hypnobirthing"})]}),t(w,{label:"Date",type:"date",name:"date",onChange:l}),t(H,{children:N?t(Z,{}):"Add Birth"})]})})})}export{ge as B};
