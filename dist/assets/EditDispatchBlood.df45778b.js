import{r as s,l as O,u as P,i as E,b as l,j as t,a as d,f as h}from"./index.d87dee6f.js";import{B as L}from"./ButtonPreloader.e6928a61.js";import"./react-confirm-alert.30c1f10e.js";import{B as I}from"./Button.3275d51a.js";import{I as r}from"./Input.34d9876e.js";import{S as g}from"./Select.a91200f8.js";import{F as $}from"./FormLayout.630feb8e.js";function R({url:b}){const{user:i}=s.exports.useContext(O),v=P(),[B,m]=s.exports.useState([]),[x,C]=s.exports.useState([]),[S,A]=s.exports.useState(!1),[e,u]=s.exports.useState({staffname:`${i==null?void 0:i.name}`,patientid:"",bloodgroup:"",bags:"",charges:"",date:""});function o(n){u(a=>({...a,[n.target.name]:n.target.value}))}let y=E().search;const c=new URLSearchParams(y).get("edit");return s.exports.useEffect(()=>{l.get("/patient").then(n=>{m(n.data)}),l.get(`/dischargeblood/?edit=${c}`).then(n=>{var a,p;u(n.data),C((p=(a=n.data)==null?void 0:a.patients[0])==null?void 0:p.name)})},[]),t($,{formName:"EDIT DISPATCHED BLOOD",children:d("form",{onSubmit:n=>{n.preventDefault(),A(!0),l.put(`/dischargeblood/${c}`,{patientid:e==null?void 0:e.patientid,bloodgroup:e==null?void 0:e.bloodgroup,bags:e==null?void 0:e.bags,charges:e==null?void 0:e.charges,date:e==null?void 0:e.date,staffname:e==null?void 0:e.staffname}).then(a=>{v(`${b}`,{replace:!0}),h.success(a.data)}).catch(a=>h.error(a.response.data))},children:[d(g,{label:"Patient",name:"patientid",type:"number",onChange:o,children:[t("option",{value:e==null?void 0:e.patientid,children:x}),B.map((n,a)=>t("option",{value:n==null?void 0:n._id,children:n==null?void 0:n.name},a))]}),d(g,{label:"Blood Group",type:"text",name:"bloodgroup",onChange:o,children:[t("option",{value:e==null?void 0:e.bloodgroup,children:e==null?void 0:e.bloodgroup}),t("option",{value:"A+",children:"A+"}),t("option",{value:"A-",children:"A-"}),t("option",{value:"B+",children:"B+"}),t("option",{value:"B-",children:"B-"}),t("option",{value:"O+",children:"O+"}),t("option",{value:"O-",children:"O-"}),t("option",{value:"AB+",children:"AB+"}),t("option",{value:"AB-",children:"AB-"})]}),t(r,{label:"No. Of Bags",type:"number",name:"bags",value:e==null?void 0:e.bags,onChange:o}),t(r,{label:"Charges",type:"text",name:"charges",value:e==null?void 0:e.charges,onChange:o}),t(r,{label:"Date",type:"date",name:"date",value:e==null?void 0:e.date,onChange:o}),t("input",{type:"hidden",name:"staffname",onChange:o}),t(I,{children:S?t(L,{}):"Edit Dispatched Blood"})]})})}export{R as E};
