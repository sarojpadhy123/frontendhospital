import{r,l as L,b as o,j as t,a,f as p}from"./index.d87dee6f.js";import{D as _}from"./DeleteButton.055862da.js";import{E as $}from"./EditButton.a6d27025.js";import{B as w}from"./Button.3275d51a.js";import{I as S}from"./Input.34d9876e.js";import{S as M}from"./SearchInput.d51e8da3.js";import{S as k}from"./Select.a91200f8.js";import{j as q}from"./react-confirm-alert.30c1f10e.js";import{O as D,a as z}from"./OptionsTh.e3256f46.js";import{T as G,a as H,b as i,c as J,d as c}from"./Thead.63124400.js";import{F as K}from"./FormLayout.630feb8e.js";import{T as Q}from"./Tabs.f2b07210.js";import{I as U}from"./IndexNo.141a2ac1.js";import{T as V}from"./TotalNo.2b8dc21c.js";import{R as W}from"./index.esm.bd88e434.js";import{R as X}from"./ReactPagination.781004e5.js";import{B as Y}from"./ButtonPreloader.e6928a61.js";function ge({role:T}){const{user:d}=r.exports.useContext(L),[C,I]=r.exports.useState([]),[l,g]=r.exports.useState([]),[x,O]=r.exports.useState(1),[v,f]=r.exports.useState(!1),[n,N]=r.exports.useState({staffname:`${d==null?void 0:d.name}`,type:"operation",patientid:"",description:"",date:""});function m(e){N(s=>({...s,[e.target.name]:e.target.value}))}function u(){o.get("/report?type=operation").then(e=>{g(e.data)}).catch(e=>{p.error(e.data)})}const B=e=>{e.preventDefault(),f(!0),o.post("/report",{type:n==null?void 0:n.type,staffname:n==null?void 0:n.staffname,patientid:n==null?void 0:n.patientid,description:n==null?void 0:n.description,date:n==null?void 0:n.date}).then(s=>{f(!1),u(),p.success(s.data)}).catch(s=>{f(!1),p.error(s.response.data)})};r.exports.useEffect(()=>{o.get("/patient").then(e=>{I(e.data)}),u()},[]);const E=e=>{o.get(`/report?type=operation&q=${e}`).then(s=>{g(s.data),O(1)})},h=10,b=x*h,F=b-h,R=l.slice(F,b),j=Math.ceil(l.length/h),A=e=>{O(e.selected+1)};return t(Q,{label1:"Operations",label2:"Add Operation",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[t(M,{onSearch:E}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[t(V,{totalnumber:l==null?void 0:l.length}),t(X,{pageCount:j,handlePageClick:A})]})]}),a(G,{children:[a(H,{children:[t(U,{children:"#"}),t(i,{children:"Reg. Id"}),t(i,{children:"Patient"}),t(i,{children:"Operation Name"}),t(i,{children:"Surgeon"}),t(i,{children:"Date"}),t(i,{children:"Outcome Status"}),(d==null?void 0:d.role)!=="admin"&&t(D,{children:"Options"})]}),R.map((e,s)=>{var y,P;return a(J,{children:[t(c,{children:s+1*(x*h-9)}),t(c,{className:"font-bold",children:(y=e==null?void 0:e.patients[0])==null?void 0:y.registrationId}),t(c,{children:(P=e==null?void 0:e.patients[0])==null?void 0:P.name}),t(c,{children:e==null?void 0:e.description}),t(c,{children:e==null?void 0:e.staffname}),t(c,{children:e==null?void 0:e.date}),t(c,{children:e==null?void 0:e.outcomestatus}),(d==null?void 0:d.role)!=="admin"&&a(z,{children:[a($,{editFunction:`${T}/edit_operation?edit=${e==null?void 0:e._id}`,children:["Edit",t(W,{})]}),a(_,{path:"report",id:e==null?void 0:e._id,record:u,children:["Delete",t(q,{})]})]})]},s)})]})]}),content2:t(K,{formName:"ADD OPERATION",children:a("form",{onSubmit:B,children:[t("input",{type:"hidden",name:"type",onChange:m}),t("input",{type:"hidden",name:"staffname",onChange:m}),a(k,{label:"Patient",name:"patientid",type:"number",onChange:m,children:[t("option",{value:"",children:"Select Patient"}),C.map((e,s)=>a("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},s))]}),t(S,{label:"Operation Type",type:"text",name:"description",onChange:m}),t(S,{label:"Date",type:"date",name:"date",onChange:m}),t(w,{children:v?t(Y,{}):"Add Operation"})]})})})}export{ge as O};
